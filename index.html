<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="src/js.cookie.js"></script>

<html>
<title>TM Job Board</title>
<div style="color:black;">

</div>
<div id="login">

</div>

<div id="main-body" hidden>
    <div id="login-cred">
    </div>
    <div id="heading">

        <form action="javascript:getJobs()" class="headerForms">
            <input type="checkbox" id="active" value="Active" checked> Active
            <input type="checkbox" id="onhold" value="On Hold"> On Hold
            <input type="checkbox" id="covered" value="Covered"> Covered
            <input type="checkbox" id="closed" value="Closed"> Closed<br>
            <input type="checkbox" id="IT" value="IT/Engineering"> IT/Engineering
            <input type="checkbox" id="CS" value="Customer Service"> Customer Serivce <br>
             
            <input type="checkbox" id="Admin" value="Admin/Clerical"> Admin/Clerical
            <input type="checkbox" id="LI" value="Light Industrial"> Light Industrial <br>
            <input type="checkbox" id="Finance" value="Finance/HR"> Finance/HR
            <input type="checkbox" id="GCG" value="GCG"> GCG
            <input type="checkbox" id="Scientific" value="Scientific"> Scientific <br>
            <!--input type="checkbox" id="CS2" value="CS2"> CS2 -->
            <input type="checkbox" id="Direct" value="Direct"> Direct
            <input type="checkbox" id="All" value="All"> All <br>
            <br><input type="submit" value="Get Jobs" class="jobsbutton">

        </form>
        <div>
            <br><br><br><br><br><a href="https://docs.google.com/spreadsheets/d/1NXKWYpRtL8OO_9S1dJDuFAMZY-Ln8AsmdioA_zQMzSY/edit#gid=0" target="_blank">RANDOM REQ #</a><br>  
            <a href="https://docs.google.com/forms/d/1aFg2zwgkgrJBT_iOiAah-T_Y-EH8Udtud2iRKOy7IgU/viewform?entry.800787893&entry.1730603953=Job+Order-New&entry.1886625663&entry.1476787360&entry.2013144955&entry.1827729736&entry.814114545&entry.468518022&entry.742491833&entry.287626579&entry.217038950&entry.2032344006&entry.416110241&entry.787814123&entry.592968713&entry.357815638&entry.732818322&entry.2019722337&entry.822405189&entry.752023093&entry.238160005&entry.1155285359&entry.35590445&entry.1528151668&entry.902695244&entry.443073797&entry.1588196422&entry.858348364&entry.906479677&entry.1904196442&entry.16814497&entry.867132953&entry.1056928434&entry.1443005426&entry.852908071&entry.425499655&entry.492813056&entry.1584173311&entry.1512594551&entry.1346226202&entry.299780009&entry.1564983395&entry.463199010&entry.1536834282&entry.916859498&entry.1376058920" target="_blank">NEW JOB</a><br>            
            <a href="https://script.google.com/macros/s/AKfycby1MbuHTmOosoxLpr6DmmQvZprgNPk-MEEdjnK9vYXIU2vIAntp/exec" target="_blank">SUBMIT CANDIDATE</a> 
        </div>
        <form action="javascript:performSearch()" class="headerForms">
            <label for="searchbarselect" class="searchbarlabel">SEARCH BY: </label>
            <select class="searchbarselect" id="searchbarselect">
                <option value='Req_Number'>Req Number</option>
                <option value='Client'>Client</option>
                <option value='Job_Title'>Job Title</option>
                <option value='Location'>Location</option>
                <option value='Candidate'>Candidate</option>
            </select>
            <input type="checkbox" id="searchascend" name="searchascend" class="searchascend" checked>ASCENDING<br>
            <input type="text" id="searchbar" name="searchbar" class="searchbar" autocomplete="on">
            <input type="submit" value="SEARCH" class="searchbutton">
        </form>

        <form action="javascript:performSearch()" class="sortby">
            <label class="sortbylabel">SORT BY: </label>
            <select class="sortbyselect" id="sortbyselect">
                <option value='Req_Number'>Req Number</option>
                <option value='Client'>Client</option>
                <option value='Job_Title'>Job Title</option>
                <option value='Location'>Location</option>
                <option value='Open_Date'>Open Date</option>
                <option value='Submittal_Deadline'>Submittal Deadline</option>
                <option value='Pay_Rate'>Pay Rate</option>
                <option value='Candidates_in_Consideration'>Candidates in Consideration</option>
                <option value='Type_of_Service'>Category</option>
            </select>
            <input type="submit" value="SORT" class="sortbybutton">
        </form>
<div style="color:black;">
  <input type="checkbox" id="autorefresh" name="autorefresh" class="autorefresh" checked>AUTO-REFRESH<br>
</div>
    </div>
    <div id="end" style="color:black;">
    <button onclick="logout()">LOGOUT</button>
    </div>
    <!-- <form action="javascript:submitCandidate()" class="submissionForm hidden" id="submissionForm">
                    <label>Client</label><br>
                      <input type="radio" name="client" value="AEP"/>
                      <label>AEP</label>
                      <br>
                      <input type="radio" name="client" value="Ashland"/>
                      <label>Ashland</label>
                      <br>
                      <input type="radio" name="client" value="Auld"/>
                      <label>Auld</label>
                      <br>
                      <input type="radio" name="client" value="Alliance"/>
                      <label>Alliance</label>
                      <br>
                      <input type="radio" name="client" value="Ameriprise"/>
                      <label>Ameriprise</label>
                      <br>
                      <input type="radio" name="client" value="ARC"/>
                      <label>ARC</label>
                      <br>
                      <input type="radio" name="client" value="Battelle"/>
                      <label>Battelle</label>
                      <br>
                      <input type="radio" name="client" value="Cardinal Health"/>
                      <label>Cardinal Health</label>
                      <br>
                      <input type="radio" name="client" value="GCG"/>
                      <label>GCG</label>
                      <br>
                      <input type="radio" name="client" value="JCP"/>
                      <label>JCP</label>
                      <br>
                      <input type="radio" name="client" value="Lowes"/>
                      <label>Lowes</label>
                      <br>
                      <input type="radio" name="client" value="Luxottica"/>
                      <label>Luxottica</label>
                      <br>
                      <input type="radio" name="client" value="McGraw Hill"/>
                      <label>McGraw Hill</label>
                      <br>
                      <input type="radio" name="client" value="Merrill"/>
                      <label>Merrill</label>
                      <br>
                      <input type="radio" name="client" value="MetLife"/>
                      <label>MetLife</label>
                      <br>
                      <input type="radio" name="client" value="Morgan Stanley"/>
                      <label>Morgan Stanley</label>
                      <br>
                      <input type="radio" name="client" value="Nationwide"/>
                      <label>Nationwide</label>
                      <br>
                      <input type="radio" name="client" value="OSU"/>
                      <label>OSU</label>
                      <br>
                      <input type="radio" name="client" value="Plaza"/>
                      <label>Plaza</label>
                      <br>
                      <input type="radio" name="client" value="P&G"/>
                      <label>P&G</label>
                      <br>
                      <input type="radio" name="client" value="Roche"/>
                      <label>Roche</label>
                      <br>
                      <input type="radio" name="client" value="Rickenbacker"/>
                      <label>Rickenbacker</label>
                      <br>
                      <input type="radio" name="client" value="SuperValu"/>
                      <label>SuperValu</label>
                      <br>
                      <input type="radio" name="client" value="Vantiv"/>
                      <label>Vantiv</label>
                      <br>
                      <input type="radio" name="client" value="Ventana"/>
                      <label>Ventana</label>
                      <br>
                      <input type="radio" name="client" value="VF Corp"/>
                      <label>VF Corp</label>
                      <br>
                      <input type="radio" name="client" value="Webster Bank"/>
                      <label>Webster Bank</label>
                      <br>
                      <input type="radio" name="client" value="Worthington"/>
                      <label>Worthington</label>
                      <br>
                      <input type="radio" name="client" value="York RSG"/>
                      <label>York RSG</label>
                      <br>
                <br>
                <label>Req Number</label><br>
                <input id="submissionReq" type="text" name="reqnum" required>
                <br><br>
                <label>Job Title</label><br>
                <input id="submissionTitle" type="text" name="jobtitle" required>
                <br><br>
                <label>Recruiter</label><br>
                      <input type="radio" name="recruiter" value="Amanda Dickson"/>
                      <label>Amanda Dickson</label>
                      <br>
                      <input type="radio" name="recruiter" value="Amber Kane"/>
                      <label>Amber Kane</label>
                      <br>
                      <input type="radio" name="recruiter" value="Chris Dunworth"/>
                      <label>Chris Dunworth</label>
                      <br>
                      <input type="radio" name="recruiter" value="Chrissy Strickland"/>
                      <label>Chrissy Strickland</label>
                      <br>
                      <input type="radio" name="recruiter" value="Clara Parks"/>
                      <label>Clara Parks</label>
                      <br>
                      <input type="radio" name="recruiter" value="Dave Hellard"/>
                      <label>Dave Hellard</label>
                      <br>
                      <input type="radio" name="recruiter" value="Jake Denham"/>
                      <label>Jake Denham</label>
                      <br>
                      <input type="radio" name="recruiter" value="Jamey Pierson"/>
                      <label>Jamey Pierson</label>
                      <br>
                      <input type="radio" name="recruiter" value="Jess McDaniel"/>
                      <label>Jess McDaniel</label>
                      <br>
                      <input type="radio" name="recruiter" value="Jess Toth"/>
                      <label>Jess Toth</label>
                      <br>
                      <input type="radio" name="recruiter" value="Jillian Adams"/>
                      <label>Jillian Adams</label>
                      <br>
                      <input type="radio" name="recruiter" value="Kelly Spencer"/>
                      <label>Kelly Spencer</label>
                      <br>
                      <input type="radio" name="recruiter" value="Kelsie Bowling"/>
                      <label>Kelsie Bowling</label>
                      <br>
                      <input type="radio" name="recruiter" value="Kobby Nyen"/>
                      <label>Kobby Nyen</label>
                      <br>
                      <input type="radio" name="recruiter" value="Maddy Ozvath"/>
                      <label>Maddy Ozvath</label>
                      <br>
                      <input type="radio" name="recruiter" value="Sara Hantak"/>
                      <label>Sara Hantak</label>
                      <br>
                      <input type="radio" name="recruiter" value="Steph Llanos"/>
                      <label>Steph Llanos</label>
                      <br>
                      <input type="radio" name="recruiter" value="Toni Lemond"/>
                      <label>Toni Lemond</label><br><br>

                <label>Candidate Name</label><br>
                <input type="text" name="candidate" id="submissionCandidateName" required>
                <br><br>
                <label>TempWorks ID</label><br>
                <input type="text" name="TempworksID" id="tempworksID" required>
                <br><br>
                <label>Pay Rate</label><br>
                <input id="submissionPay" type="text" name="payrate" required>
                <br><br>
                <label>Type of Role</label><br>
                <input type="radio" name="role" value="Customer Service"/>
                <label>Customer Service</label><br>
                <input type="radio" name="role" value="Admin/Clerical"/>
                <label>Admin/Clerical</label><br>
                <input type="radio" name="role" value="Light Industrial"/>
                <label>Light Industrial</label><br>
                <input type="radio" name="role" value="Finance/HR"/>
                <label>Finance/HR</label><br>
                <input type="radio" name="role" value="IT/Engineering"/>
                <label>IT/Engineering</label><br>
                <input type="radio" name="role" value="Scientific"/>
                <label>Scientific</label>
                <br><br>

                <label>Sourcerer</label><br>
                <input type="checkbox" name="Sourcer" value="Tom"> Assisted by Tom White<br>
                <input type="checkbox" name="Sourcer" value="Toni"> Assisted by Toni Lemond<br>
                <input type="checkbox" name="Sourcer" value="Danny"> Assisted by Danny Hollis<br>
                <input type="checkbox" name="Sourcer" value="Ellen"> Assisted by Ellen Stoy<br>
                <br><br>

                <label>Write-Up</label><br>
                <textarea id="submissionWriteUp" rows="10" cols="130" type="textarea" name="writeup"></textarea>
                <br><br>
                <label>Additional Information</label><br>
                <textarea id="submissionAdditionalInfo" rows="8" cols="130" name="ssn"></textarea><br><br>

                <label>Upload Resume</label><br>

                <input type="file" name="myFile"><br><br>

                <label>Additional Documentation</label><br>

                <input type="file" name="myFile1"><br><br>

                <label>Additional Documentation</label><br>

                <input type="file" name="myFile2"><br><br>

                <label>Additional Documentation</label><br>

                <input type="file" name="myFile3"><br><br>


               <input type="submit" value="SUBMIT"
               onclick="">

    </form> -->
    <div class="pop-up-panel col-18 hidden" id="popuppanel">


        <div class="candidate-panel col-18" id="candidate-panel">

        </div>


        <div class="int-candidate-popup col-18 hidden" id="int-candidate-popup">
            <form action="javascript:submitInterview()" class="int-submission" id="int-submission">
                <label>STATUS</label><br>
                <input type="radio" name="int-status" value="Interview Confirmed" required>
                <label>INTERVIEW CONFIRMED</label>
                <input type="radio" name="int-status" value="Interview Requested">
                <label>INTERVIEW REQUESTED</label><br>
                <label>TYPE</label><br>
                <input type="radio" name="int-type" value="In Person">
                <label>IN PERSON</label>
                <input type="radio" name="int-type" value="Skype">
                <label>SKYPE</label>
                <input type="radio" name="int-type" value="Phone">
                <label>PHONE</label><br>
                <label>INTERVIEW DATE</label>
                <input type="date" name="int-date" id="int-date">
                <label>NOTES</label>
                <input type="text" name="int-notes" id="int-notes" value=" ">
                <input type="submit" name="submit-int" id="submit-int" value="SUBMIT">
            </form>
            
        </div>


        <div class="off-candidate-popup col-18 hidden" id="off-candidate-popup">
            <form action="javascript:offer()" class="off-submission" id="off-submission">
                <label>STATUS</label><br>
                <input type="radio" name="off-status" value="Offer Requested" required>
                <label>OFFER REQUESTED</label>
                <input type="radio" name="off-status" value="Offer Accepted">
                <label>OFFER ACCEPETED</label><br>
                <label>NOTES</label>
                <input type="text" name="off-notes" id="off-notes" value=" ">

                <input type="submit" name="submit-off" id="submit-off" value="SUBMIT">
            </form>
        </div>

        <div class="clrd-candidate-popup col-18 hidden" id="clrd-candidate-popup">
            <form action="javascript:clrd()" class="clrd-submission" id="clrd-submission">
                <label>EXPECTED START</label><br>
                <input type="date" name="clrd-date">
                <label>NOTES</label>
                <input type="text" name="clrd-notes" id="clrd-notes" value=" ">

                <input type="submit" name="submit-clrd" id="submit-clrd" value="SUBMIT">
            </form>
        </div>



        <div class="con-candidate-popup col-18 hidden" id="con-candidate-popup">
            <form action="javascript:con()" class="con-submission" id="con-submission">
                <label>START DATE</label>
                <input type="date" name="con-date" id="con-date" required>
                <label>PAY RATE</label>
                <input type="text" name="con-pay-rate" id="con-pay-rate" value=" ">
                <label>BILL RATE</label>
                <input type="text" name="con-bill-rate" id="con-bill-rate" value=" "><br>
                <label>NOTES</label>
                <input type="text" name="con-notes" id="con-notes" value=" ">

                <input type="submit" name="submit-con" id="submit-con" value="SUBMIT">
            </form>
        </div>


        <div class="rmvd-candidate-popup col-18 hidden" id="rmvd-candidate-popup">
            <form action="javascript:rmvd()" class="rmvd-submission" id="rmvd-submission">
                <label>REASON</label><br>
                <select id="rmvd-reason" required>
                    <option value="">Select one of the Following</option>
                    <option value="Above Bill Rate">Above Bill Rate</option>
                    <option value="Account Manager Denied">Account Manager Denied</option>
                    <option value="Candidate Already Submitted by other Vendor">Candidate Already Submitted by other Vendor</option>
                    <option value="Canidate Refused Offer">Candidate Refused Offer</option>
                    <option value="Candidate Took other Opportunity">Candidate Took other Opportunity</option>
                    <option value="Failed Assessment">Failed Assessment</option>
                    <option value="Failed Pre-employment">Failed Pre-employment</option>
                    <option value="Interview Rejected by candidate">Interview Rejected by candidate</option>
                    <option value="No Feedback">No Feedback</option>
                    <option value="No Show for Interview">No Show for Interview</option>
                    <option value="Non-Responsive/Candidate Withdrawn">Non-Responsive/Candidate Withdrawn</option>
                    <option value="Not enough experience">Not enough experience</option>
                    <option value="Rejected Interview after Confirmation">Rejected Interview after Confirmation</option>
                    <option value="Other candidates better suited">Other candidates better suited</option>
                    <option value="Overqualified">Overqualified</option>
                    <option value="Other">Other</option>
                </select>
                <label>NOTES</label>
                <input type="text" name="rmvd-notes" id="rmvd-notes" value=" ">
                <input type="submit" name="submit-int" id="submit-int" value="SUBMIT">
            </form>
        </div>


        <div class="notes-candidate-popup col-18 hidden" id="notes-candidate-popup">
            <div id="cand-notes-div">
            </div>
            <form action="javascript:notesForCandidate()" class="notes-submission" id="notes-submission">
                <input type="submit" name="submit-notes" id="submit-notes" value="CLOSE">
            </form>
        </div>

        <div class="submit-candidate-popup col-18 hidden" id="submit-candidate-popup">
            <form action="javascript:submitForCandidate()" class="submit-submission" id="submit-submission">
                <label>NOTES</label><br>
                <input type="text" name="sub-notes" id="sub-notes">
                <input type="submit" name="submit-submit" id="submit-submit" value="SUBMIT">
            </form>
        </div>


        <div id="edit-panel" class="col-18 hidden">
            <div id="edit-nav" class="col-18">
                <div class="col-6 tab-option" id="modified-tab">
                    MODIFIED
                </div>
                <div class="col-6 tab-option" id="on-hold-tab">
                    ON HOLD
                </div>
                <div class="col-6 tab-option" id="closed-tab">
                    CLOSED
                </div>
            </div>
            <div id="edit-modified" class="col-18 edit-tab hidden">
                <div class="col-5 edit-form">
                    <label for="job-title-input">job title</label>
                    <input type="text" name="job-title" id="job-title-input">
                    <label for="location-input">location</label>
                    <input type="text" name="location" id="location-input">
                    <label for="address-input">address</label>
                    <input type="text" name="address" id="address-input">
                    <label for="pay-rate-input">pay rate</label>
                    <input type="number" name="pay-rate" id="pay-rate-input">
                    <label for="bill-rate-input">bill rate</label>
                    <input type="number" name="bill-rate" id="bill-rate-input">
                    <label for="start-date-input">start date</label>
                    <input type="date" name="start-date" id="start-date-input">
                </div>
                <div class="col-5 edit-form">
                    <label for="job-type-input">job type</label>
                    <select class="job-type" id="job-type-input">
                        <option value='IT/Engineering'>IT/Engineering</option>
                        <option value='Customer Service'>Customer Service</option>
                        <option value='Admin/Clerical'>Admin/Clerical</option>
                        <option value='Light Industrial'>Light Industrial</option>
                        <option value='Finance/HR'>Finance/HR</option>
                        <option value='GCG'>GCG</option>
                        <option value='Scientific'>Scientific</option>
                        <option value='Direct'>Direct</option>
                        <option value='Test'>Test</option>
                    </select><br>
                    <label for="end-date-input">end date</label>
                    <input type="date" name="end-date" id="end-date-input">
                    <label for="deadline-input">deadline</label>
                    <input type="date" name="deadline" id="deadline-input" required>
                    <label for="openings-input">openings</label>
                    <input type="number" name="openings" id="openings-input">
                    <label for="hiring-manager-input">hiring manager</label>
                    <input type="text" name="hiring-manager" id="hiring-manager-input">
                    <label for="override-input">override</label>
                    <input type="number" name="override" id="override-input">
                </div>
                <div class="col-8 edit-form">
                    <label for="job-description-input">Job Description</label>
                    <textarea id="job-description-input"></textarea>
                    <label for="notes-input">notes</label>
                    <textarea id="notes-input"></textarea>
                    <div class="col-18 r-align-wrapper">
                        <button class="r-align" id="submit-mod-edit" onclick="submitEdit()">Submit Now</button>
                    </div>
                </div>
            </div>
            <div id="edit-on-hold" class="col-18 edit-tab hidden">
                <div class="col-9 on-hold-form">
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="on-hold" value="acct manager placed on hold" id="on-hold-0"><label class="v-align radio-label" for="on-hold-0">acct manager placed on hold</label>
                    </div>
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="on-hold" value="manager reviewing resumes" id="on-hold-1"><label class="v-align radio-label" for="on-hold-1">manager reviewing resumes</label>
                    </div>
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="on-hold" value="no more submission slots" id="on-hold-2"><label class="v-align radio-label" for="on-hold-2">no more submission slots</label>
                    </div>
                    <textarea id="hold-notes-input"></textarea>
                    <label for="hold-notes-input">notes</label>
                </div>
                <div class="col-9 on-hold-form">
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="on-hold" value="Offer out to Candidate" id="on-hold-3"><label class="v-align radio-label" for="on-hold-3">Offer out to Candidate</label>
                    </div>
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="on-hold" value="On hold" id="on-hold-4"><label class="v-align radio-label" for="on-hold-4">On hold</label>
                    </div>
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="on-hold" value="other" id="on-hold-5"><input type="text" class="v-align" name="on-hold-other" id="on-hold-other" placeholder="OTHER">
                    </div>
                    <div class="col-18 r-align-wrapper">
                        <button class="r-align" id="submit-on-hold" onclick="submitOnHold()">Submit Now</button>
                    </div>
                </div>
            </div>
            <div id="edit-completed" class="col-18 edit-tab hidden">
                <div class="col-9 completed-form">
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="completed-radio" value="filled by tm" id="completed-0"><label class="v-align radio-label" for="completed-0">filled by tm</label>
                    </div>
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="completed-radio" value="partially filled by tm" id="completed-1"><label class="v-align radio-label" for="completed-1">partially filled by tm</label>
                    </div>
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="completed-radio" value="filled by other agency" id="completed-2"><label class="v-align radio-label" for="completed-2">filled by other agency</label>
                    </div>
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="completed-radio" value="Filled by pass-through" id="completed-5"><label class="v-align radio-label" for ="completed-5">Filled by pass through</label>
                    </div><textarea id="completed-notes-input"></textarea>
                    <label for="completed-notes-input">notes</label>
                </div>
                <div class="col-9 completed-form">
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="completed-radio" value="closed" id="completed-3"><label class="v-align radio-label" for="completed-3">closed</label>
                    </div>
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="completed-radio" value="cancelled" id="completed-4"><label class="v-align radio-label" for="completed-4">cancelled</label>
                    </div>
                    
                    <div class="v-align-wrapper radio-line">
                        <input type="radio" name="completed-radio" value="other" id="completed-6"><input type="text" class="v-align" name="completed-other" id="completed-other" placeholder="OTHER">
                    </div>
                    <div class="col-18 r-align-wrapper">
                        <button class="r-align" id="submit-completed" onclick="submitClosed()">Submit Now</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="additionalinfo" hidden>


            <br><br>
            <div id="edit-modified" class="col-18 edit-tab">
                <div class="col-5 edit-form">
                    <label for="job-title-info">job title</label>
                    <input type="text" name="job-title" id="job-title-info" readonly>
                    <label for="address-info">address</label>
                    <input type="text" name="address" id="address-info" readonly>
                    <label for="location-info">location</label>
                    <input type="text" name="location" id="location-info" readonly>
                    <label for="pay-rate-info">pay rate</label>
                    <input type="text" name="pay-rate" id="pay-rate-info" readonly>
                    <label for="bill-rate-info">bill rate</label>
                    <input type="text" name="bill-rate" id="bill-rate-info" readonly>
                    
                    <label for="submissions-info">Submissions</label>
                    <input type="text" name="submissions" id="submissions-info" readonly>
                    
                    <label for="submissions-needed-info">submissions needed</label>
                    <input type="text" name="submissions-needed" id="submissions-needed-info" readonly>
                </div>
                <div class="col-5 edit-form">
                    <label for="end-date-info">job type</label>
                    <input type="text" name="job-type" id="job-type-info" readonly>
                    <label for="start-date-info">start-date</label>
                    <input type="text" name="start-date" id="start-date-info" readonly>
                    <label for="end-date-info">end date</label>
                    <input type="text" name="end-date" id="end-date-info" readonly>
                    <label for="deadline-info">deadline</label>
                    <input type="text" name="deadline" id="deadline-info" readonly>
                    <label for="hiring-manager-info">hiring manager</label>
                    <input type="text" name="hiring-manager" id="hiring-manager-info" readonly>
                    <label for="rejections-info">rejections</label>
                    <input type="text" name="rejections" id="rejections-info" readonly>
                </div>
                <div class="col-8 edit-form">
                    <label for="job-description-info">Job Description</label>
                    <textarea id="job-description-info"></textarea>
                    <label for="notes-info">notes</label>
                    <textarea id="notes-info"></textarea>
                </div>

            </div>

        </div>

    </div>

    <div id="div">
        GETTING JOBS
    </div>
    
    <div id="bottom" style="color:black;">
        
    </div>
</div>
</html>

<script>
    
    var home = "index.html";
    //var datamanager = "http://staging.tailoredmanagement.com/jobreport/datamanager.php";
var datamanager = "http://jobreport.tailoredmanagement.com/datamanager.php";
    var adminmanager = "http://jobreport.tailoredmanagement.com/admin/adminmanager.php";
    var reqInUse = "";
    var UserPermission = "";
    var UserName = "";
    var UserType = "";
    var UserClients = [];
    var ClientNames = ["", "AEP", "Alliance", "Ameriprise", "ARC", "Ashland", "Auld", "Cardinal Health", "JCP", "Liberty Mutual", "Luxottica", "McGraw Hill", "Merrill", "Metlife", "Morgan Stanley", "Nationwide", "OSU", "P&G", "Plaza", "Quantum Health", "Roche", "Vantiv", "Ventana", "VF Corp", "Webster Bank", "Worthington", "York RSG", "Contact Us", "GCG", "SuperValu", "Rickbenbacker", "Test", "Omnicare", "Standard Register", "Battelle", "Test", "Principle RPO"];
    var Req_Number = 0, Client = 1, Job_Title = 2, Type_of_Service = 3, Priority = 4,
    Location_ = 5, Pay_Rate = 6, Bill_Rate = 7, Open_Date = 8, Submittal_Deadline = 9,
    Openings = 10, Candidates_in_Consideration = 11, Submissions = 12, Candidates_Rejected = 13, Number_of_submissions_needed = 14,
    Description = 15, Notes = 16, Start_Date = 17, End_Date = 18, Hiring_Manager = 19, Address = 20,
    Override = 21, Stamp = 22;
</script>

<script>
    window.onscroll = scrollTest;
    attemptLogin();
    
    function attemptLogin()
    {
        var toLogin = true;
        if ((Cookies.get("username") != "") && (Cookies.get("username") != undefined))
        {
                UserName = Cookies.get("username");
                UserType = Cookies.get("usertype");
                document.title = UserName;
                try {UserPermission = Cookies.get("permission");} 
                catch(err){
                alert(err.message);
                toLogin = false;
                }
                try {
                var tempClients = Cookies.get("clients").split(";");
                for (i = 0; i < tempClients.length; i++) {
                    UserClients.push(ClientNames[tempClients[i]]);
                }
                }
                catch(erro) {
                alert(erro.message);
                toLogin = false;
                }
                if (toLogin)
                {
                checkRecruiter();
            $('#login').hide();
                $('#main-body').show();
                }
        }
    }
    function logout()
    {
        Cookies.set("username", "");
        Cookies.set("permission", "");
        Cookies.set("clients", "");
        Cookies.set("usertype", "");
        document.location = home;
    }
    function login() {
        UserPermission = $('input[name="user"]:checked', '#user-login-form').attr('usertype');
var clientsString = $('input[name="user"]:checked', '#user-login-form').attr('clients');
        var tempClients = clientsString.split(";");
        for (i = 0; i < tempClients.length; i++) {
            UserClients.push(ClientNames[tempClients[i]]);
        }
        UserName = $('input[name="user"]:checked', '#user-login-form').val();
        document.title = $('input[name="user"]:checked', '#user-login-form').val();
        $('#login').hide();
        $('#main-body').show();
        UserType = $('input[name="user"]:checked', '#user-login-form').attr('usertype');
        checkRecruiter();
        Cookies.set("username", UserName);
        Cookies.set("permission", UserPermission);
        Cookies.set("clients", clientsString);
        Cookies.set("usertype", UserType);
    }
    function checkRecruiter() {
        if (UserType == "0") {
            $('.edit').hide();
        }
    }
    function getLogins() {
        var formData = { function: "RetrieveLogin" };
        $.ajax({
            url: adminmanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                document.getElementById("login").innerHTML = data;
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error");
            }
        });
    }

    function scrollTest() {
        try {
            var top = document.getElementById("loadPosition").getBoundingClientRect().top;
            if (top <= (1.5 * window.innerHeight)) {
                loadMore();
                addButtons();
            }
        }
        catch (err) {
            if (!document.getElementById("end")) {
                document.getElementById("div").innerHTML += '<div id="end">NO MORE JOBS TO LOAD</div>';
                addButtons();
            }
        }
    }
    function loadMore() {

        var loadTo = loadIndex + 25;
        if (loadTo >= rows.length) {
            loadTo = rows.length - 1;
        }
        $('#loadPosition').remove();
        for (i = loadIndex; i < loadTo; i++) {
            loadIndex = i;
            addCard(rows[i]);
        }
        loadIndex++;
        if (loadIndex >= rows.length - 1) {
            return;
        }
        document.getElementById("div").innerHTML += '<div id="loadPosition">LOADING MORE JOBS</div>';
        checkRecruiter();
    }
    var headers = ["Req_Number", "Client", "Job_Title", "Type_of_Service", "Priority", "Location", "Pay_Rate", "Bill_Rate", "Open_Date", "Submittal_Deadline", "Openings", "Candidates_in_Consideration", "Submissions", "Candidates_Rejected", "Number_of_submissions_needed", "Description", "Notes", "Start_Date", "End_Date", "Hiring_Manager", "Address", "Override", "Stamp"];
    var headersWithTag;
    var jobData = new Array();
    var loadIndex = 0;
    var rows;

    getJobs();
    getLogins();
    function sortby() {
        var priorities = getPriorityQuery();

        var formData = { function: "SortedGetNew", search: document.getElementById("searchbar").value, column: document.getElementById("searchbarselect").value, order: document.getElementById("sortbyselect").value };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {

                createCards(data);
                addButtons();
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error");
            }
        });
    }

    function performSearch() {
        try {
            searchResult();
        }
        catch (err) {
            alert("NO RESULTS FOUND: " + err.message);
            getJobs();
        }
    }

    function searchReq(req) {
        var dataArray = jobData[req].split("<dataElement>");
        document.getElementById("div").innerHTML = '<button onclick="getDropdownEdit(\'' + req + '\')" class="container col-18"><div class="top-row col-18"><div class="col-6 v-mid"><div class="job-num">#<element id="req_number' + req + '">79</element></div></div><div class="col-4 v-mid-pad"><div class="col-title"><strong>Open: </strong><element id="open_date' + req + '"">06:25:15</element></div></div><div class="col-4 v-mid-pad"><div class="col-title"><strong>Start: </strong><element id="start_date">06:25:15</element></div></div><div class="col-4 v-mid-pad"><div class="col-title"><strong>Deadline: </strong><element id="deadline">06:25:15</element></div></div></div><div class="bottom-row col-18"><div class="col-6"><div class="job-img"><img src="img/job-placeholder.png"></div><div class="job-desc"><h5><element id="job_title' + req + '">Design Technician</element></h5><p><element id="job_type">IT/Engineering</element></p><p><element id="job_location">Columbus, OH</element></p></div></div><div class="col-4"><div class="number-card"></div></div><div class="col-4"><div class="pay-card"></div></div><div class="col-4"></div></div></button><div id="dropdown' + req + '" style="display: none;"></div>';

        document.getElementById("req_number" + req).textContent = dataArray[Req_Number];

        document.getElementById("job_title" + req).textContent = dataArray[Job_Title];

        var d = new Date(dataArray[Open_Date]);
        var date = (1 + d.getMonth()) + "." + d.getDate() + "." + d.getFullYear();
        document.getElementById("open_date" + req).textContent = date;
    }

    function searchResult() {

        var priorities = getPriorityQuery();
        var searchvalue = document.getElementById("searchbar").value;
        searchvalue = searchvalue.trim();
              	
        
        
        var searchby = document.getElementById("searchbarselect").value;
    var ascend = " ASC";
    if(!$("#searchascend").prop("checked"))
    {
        ascend = " DESC";
    }
        var formData = { function: "Search", search: searchvalue, column: searchby, priorities: priorities, order: document.getElementById("sortbyselect").value, ascending: ascend};

        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {

                if (data != "") {
                    rows = data.split("<rowElement>");
                    var totalcount = rows.length - 1;
                    console.log(totalcount);
                    document.getElementById("end").innerHTML = totalcount;
                    createCards(data);
                    addButtons();
                }
                else {
                    document.getElementById("div").innerHTML = "";
                    document.getElementById("end").innerHTML = "NO RESULTS";
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("unknown error: " + errorThrown);
            }
        });
    }

    function submitCandidate() {
        var client = $("input[name='client']:checked").val();
        var reqnum = $("input[name='reqnum']").val();
        var jobtitle = $("input[name='jobtitle']").val();
        var recruiter = $("input[name='recruiter']:checked").val();
        var candidate = $("input[name='candidate']").val();
        var payrate = $("input[name='payrate']").val();
        var role = $("input[name='role']:checked").val();
        //var sourcer = "undefined";
        var writeup = $("input[name='writeup']").val();
        var additional = $("input[name='ssn']").val();

        var query = "(('" + client + "')," + "('" + reqnum + "')," + "('" + recruiter + "')," + "('" + candidate + "')," + "('" + payrate + "')," + "('" + role + "')," + "('" + writeup + "')," + "('" + additional + "')," + "('" + Date.now() + "'))";

        var formData = { function: "SubmitCandidate", data: query };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                	if($("#autorefresh").prop("checked"))
	{
        	document.location = home;
	}
	else {	
		alert("Action has successfully been logged")
	}
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("unknown error: " + errorThrown);
            }
        });

    }

    function getJobs() {
        var priorities = getPriorityQuery();
        if (priorities == "")
            return;
        var formData = { function: "Test", data: priorities };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {

                createCards(data);
                addButtons();
                checkRecruiter();
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error getJobs()");
            }
        });
    }

    function getPriorityQuery() {
        var priorities = "";
        var multiple = false;
        var active, onhold, covered, closed;
        var IT = true, Admin = true, CS = true, Finance = true, LI = true, Scientific = true, GCG = true; Direct = true;
        var multipleCategories = false;
        var categories = "";
        var output = "";
        try {
            active = document.getElementById("active").checked;
            onhold = document.getElementById("onhold").checked;
            covered = document.getElementById("covered").checked;
            closed = document.getElementById("closed").checked;
            IT = document.getElementById("IT").checked;
            Admin = document.getElementById("Admin").checked;
            LI = document.getElementById("LI").checked;
            Finance = document.getElementById("Finance").checked;
            CS = document.getElementById("CS").checked;
            Scientific = document.getElementById("Scientific").checked;
            GCG = document.getElementById("GCG").checked;
            Direct = document.getElementById("Direct").checked;
            All = document.getElementById("All").checked;
        }
        catch (err) {
            active = onhold = covered = closed = true;
            console.log("catch: " + err);
        }
        //if all true just get everything in the database.
        if (active) {
            priorities += "Priority='Active'";
            multiple = true;
        }
        if (onhold) {
            if (multiple)
                priorities += " OR ";
            priorities += "Priority='On Hold'";
            multiple = true;
        }
        if (covered) {
            if (multiple)
                priorities += " OR ";
            priorities += "Priority='Covered'";
            multiple = true;
        }
        if (closed) {
            if (multiple)
                priorities += " OR ";
            priorities += "Priority='Closed'";
            multiple = true;
        }
        if (IT) {
            categories += "Type_of_Service='IT/Engineering'";
            multipleCategories = true;
        }
        if (Admin) {
            if (multipleCategories)
                categories += " OR ";
            categories += "Type_of_Service='Admin/Clerical'";
            multipleCategories = true;
        }
        if (LI) {
            if (multipleCategories)
                categories += " OR ";
            categories += "Type_of_Service='Light Industrial'";
            multipleCategories = true;
        }
        if (Finance) {
            if (multipleCategories)
                categories += " OR ";
            categories += "Type_of_Service='Finance/HR'";
            multipleCategories = true;
        }
        if (CS) {
            if (multipleCategories)
                categories += " OR ";
            categories += "Type_of_Service='Customer Service'";
            multipleCategories = true;
        }
        if (Scientific) {
            if (multipleCategories)
                categories += " OR ";
            categories += "Type_of_Service='Scientific'";
            multipleCategories = true;
        }
        if (GCG) {
            if (multipleCategories)
                categories += " OR ";
            categories += "Type_of_Service='GCG'";
            multipleCategories = true;
        }
        if (Direct) {
            if (multipleCategories)
                categories += " OR ";
            categories += "Type_of_Service='Direct'";
            multipleCategories = true;
        }
        if (All) {
            multipleCategories = true;
            multiple = true;
            priorities = "Priority='Active' OR Priority='On Hold' OR Priority='Covered' OR Priority='Closed'";
            categories = "Type_of_Service='IT/Engineering' OR Type_of_Service='Admin/Clerical' OR Type_of_Service='Light Industrial' OR Type_of_Service='Finance/HR' OR Type_of_Service='Customer Service' OR Type_of_Service='Scientific' OR Type_of_Service='GCG' OR Type_of_Service='Test' OR Type_of_Service='Direct'";
            
        }
        if (multiple && multipleCategories) {
            output = "((" + priorities + ") AND (" + categories + "))";
        }
        else if (multiple && !multipleCategories) {
            output = priorities;
        }
        else if (!multiple && multipleCategories) {
            output = categories;
        }        
        else {
            output = "";
        }
        return output;
    }

    function createCards(data) {
        var output = "<table style='width:100%'>";
        output += "<tr><th>Modify</th><th>Index</th>";
        for (x = 0; x < headers.length; x++) {
            output += "<th>" + headers[x] + "</th>";
        }
        output += "</tr>";
        rows = data.split("<rowElement>");
        document.head.innerHTML += '<link rel="stylesheet" href="css/style.css">';
        document.getElementById("div").innerHTML = "";
        document.getElementById("heading").style.display = "";

        var count = 25;
        var totalcount = rows.length;
        if (count >= rows.length)
            count = rows.length - 1;

        for (i = 0; i < count; i++) {
            loadIndex = i;
            addCard(rows[i]);
            totalcount++;
        }
        loadIndex++;
        if (loadIndex >= rows.length - 1) {
            return;
        }
        document.getElementById("div").innerHTML += '<div id="loadPosition">LOADING MORE JOBS</div>';
        
        
        
    }
    function addCard(data) {
        var dataArray = data.split("<dataElement>");
        var req = dataArray[Req_Number];
        jobData[req] = data;
        var startdate = dataArray[Start_Date];
        var deadline = "deadline";
        var payRate = parseFloat(dataArray[Pay_Rate]).toFixed(2);
        if (payRate == "NaN") {
            payRate = "";
        }
        else {
            payRate = "$" + payRate;
        }


        var monthNames = [
            "January", "February", "March",
            "April", "May", "June", "July",
            "August", "September", "October",
            "November", "December"
        ];
        
        var d = new Date(dataArray[Start_Date]);
        var newDay = d.getDate() + 1;
	var newMonth = (monthNames[d.getMonth()]);
	var newYear = d.getFullYear();
	
	if (newDay == 29 && d.getDate() == 1) {
		newDay = 1;
		newMonth = "March";
	}
	if (newDay == 32) {
		newDay = 1;
		newMonth = (monthNames[d.getMonth() + 1]);
	}
	if (newDay == 31 && (d.getDate() == 3 || d.getDate() == 5 ||  d.getDate() == 8 || d.getDate() == 10)) {
		newDay = 1;
		newMonth = (monthNames[d.getMonth() + 1]);
	}
        var startdate = newMonth + " " + newDay + ", " + newYear;
        
	d = new Date(dataArray[End_Date]);
        newDay = d.getDate() + 1;
	newMonth = (monthNames[d.getMonth()]);
	newYear = d.getFullYear();
	
	if (newDay == 29 && d.getDate() == 1) {
		newDay = 1;
		newMonth = "March";
	}
	if (newDay == 32) {
		newDay = 1;
		newMonth = (monthNames[d.getMonth() + 1]);
	}
	if (newDay == 31 && (d.getDate() == 3 || d.getDate() == 5 ||  d.getDate() == 8 || d.getDate() == 10)) {
		newDay = 1;
		newMonth = (monthNames[d.getMonth() + 1]);
	}
        var enddate = newMonth + " " + newDay + ", " + newYear;

	d = new Date(dataArray[Submittal_Deadline]);
        newDay = d.getDate() + 1;
	newMonth = (monthNames[d.getMonth()]);
	newYear = d.getFullYear();
	
	if (newDay == 29 && d.getDate() == 1) {
		newDay = 1;
		newMonth = "March";
	}
	if (newDay == 32) {
		newDay = 1;
		newMonth = (monthNames[d.getMonth() + 1]);
	}
	if (newDay == 31 && (d.getDate() == 3 || d.getDate() == 5 ||  d.getDate() == 8 || d.getDate() == 10)) {
		newDay = 1;
		newMonth = (monthNames[d.getMonth() + 1]);
	}
        var submittalDeadline = newMonth + " " + newDay + ", " + newYear;

	d = new Date(dataArray[Open_Date]);
        newDay = d.getDate() + 1;
	newMonth = (monthNames[d.getMonth()]);
	newYear = d.getFullYear();
	
	if (newDay == 29 && d.getDate() == 1) {
		newDay = 1;
		newMonth = "March";
	}
	if (newDay == 32) {
		newDay = 1;
		newMonth = (monthNames[d.getMonth() + 1]);
	}
	if (newDay == 31 && (d.getDate() == 3 || d.getDate() == 5 ||  d.getDate() == 8 || d.getDate() == 10)) {
		newDay = 1;
		newMonth = (monthNames[d.getMonth() + 1]);
	}
        var openDate = newMonth + " " + newDay + ", " + newYear;

        enddate = enddate.replace("undefined", "-");
        enddate = enddate.replace(/NaN/g, "-");
        startdate = startdate.replace("undefined", "-");
        startdate = startdate.replace(/NaN/g, "-");
        submittalDeadline = submittalDeadline.replace("undefined", "-");
        submittalDeadline = submittalDeadline.replace(/NaN/g, "-");
        openDate = openDate.replace("undefined", "-");
        openDate = openDate.replace(/NaN/g, "-");



        var card = '<div class="candidateRow col-18"><div class="top-row col-18" id="toprow"><div class="col-4 v-mid"><div class="job-num" id="req">#' + req + '     - ' + dataArray[Client] + '</div></div><div class="col-5 v-mid-pad">' +
        '<div class="col-title" id="openDate' + req + '"><strong>Open:</strong> ' + openDate + '</div>' +
        '</div><div class="col-5 v-mid-pad"><div class="col-title" id="startdate' + req + '"><strong>Start:</strong> ' + startdate + '</div>' +
        '</div><div class="col-4 v-mid-pad"><div class="col-title" id="deadline' + req + '"><strong>Deadline:</strong> ' + submittalDeadline + '</div>' +
        '</div></div><div class="bottom-row col-18" id="bottomrow"><div class="col-4">' +
        '<button onclick="alert(\'' + dataArray[Priority] + '\')" class="job-img-' + dataArray[Priority].replace(" ", "-") + '" ></button>' +
        '<div class="job-desc"><h5 id="jobTitle' + req + '">' + dataArray[Job_Title] + '</h5>' +
        '<p id="typeOfService' + req + '">' + dataArray[Type_of_Service] + '</p>' +
        '<p id="location' + req + '">' + dataArray[Location_] + '</p></div></div>' +
        '<div class="col-5"><div class="number-card"><div class="numNeed"><div class="numIcon"></div><div class="numberBar" id="submissionsNeeded' + req + '">' + dataArray[Openings] + '</div></div>' +
        '<div class="peopleNeed">' +
        '<div class="peopleIcon"></div><div class="numberBar" id="candidates' + req + '">' + dataArray[Candidates_in_Consideration] + '</div></div></div></div>' +
        '<div class="col-5"><div class="pay-card">' +
        '<div class="payRate">' +
        '<div class="payIcon"></div>' +
        '<div class="payNumBar" id="payRate' + req + '">' + payRate + '</div></div></div></div>' +
        '<div class="col-4">' +
        '<div class="col-6 dropdown-container">' +
        '<div class="dropdown candidate" id="' + req + '"><img src="img/candidate.png"></div></div>' +
        '<div class="col-6 dropdown-container">' +
        '<div class="dropdown edit" id="' + req + '"><img src="img/edit.png"></div></div>' +
        '<div class="col-6 dropdown-container">' +
        '<div class="dropdown details" id="' + req + '"><img src="img/details.png"></div></div></div></div></div>';



        document.getElementById("div").innerHTML += card;

        // document.getElementById("div").innerHTML += '<button onclick="getDropdownEdit(\'' + req + '\')" class="container col-18"><div class="top-row col-18"><div class="col-6 v-mid"><div class="job-num">#<element id="req_number' + req + '">79</element></div></div><div class="col-4 v-mid-pad"><div class="col-title"><strong>Open: </strong><element id="open_date' + req + '"">06:25:15</element></div></div><div class="col-4 v-mid-pad"><div class="col-title"><strong>Start: </strong><element id="start_date">06:25:15</element></div></div><div class="col-4 v-mid-pad"><div class="col-title"><strong>Deadline: </strong><element id="deadline">06:25:15</element></div></div></div><div class="bottom-row col-18"><div class="col-6"><div class="job-img"><img src="img/job-placeholder.png"></div><div class="job-desc"><h5><element id="job_title' + req + '">Design Technician</element></h5><p><element id="job_type">IT/Engineering</element></p><p><element id="job_location">Columbus, OH</element></p></div></div><div class="col-4"><div class="number-card"></div></div><div class="col-4"><div class="pay-card"></div></div><div class="col-4"></div></div></button><div id="dropdown' + req + '" style="display: none;"></div>';

        // document.getElementById("req_number" + req).textContent = dataArray[Req_Number];

        // document.getElementById("job_title" + req).textContent = dataArray[Job_Title];



    }
    function getDropdownEdit(req) {
        if (document.getElementById("dropdown" + req).style.display == "") {
            document.getElementById("dropdown" + req).style.display = "none";
        }
        else {
            document.getElementById("dropdown" + req).style.display = "";
        }
        var data = jobData[req].split("<dataElement>");
        var monthNames = [
            "January", "February", "March",
            "April", "May", "June", "July",
            "August", "September", "October",
            "November", "December"
        ];
        var d = new Date(data[Start_Date]);
        var startdate = (monthNames[d.getMonth()]) + " " + d.getDate() + ", " + d.getFullYear();
        d = new Date(data[End_Date]);
        var enddate = (monthNames[d.getMonth()]) + " " + d.getDate() + ", " + d.getFullYear();
        d = new Date(data[Submittal_Deadline]);
        var submittalDeadline = (monthNames[d.getMonth()]) + " " + d.getDate() + ", " + d.getFullYear();


        var inner = '<form action="javascript:sendEdit(\'' + req + '\')" >';
        inner += 'Job Title <input type="text" id="Job_Title' + req + '" value="' + data[Job_Title] + '"><br>';
        inner += 'Location <input type="text" id="Location' + req + '" value="' + data[Location_] + '"><br>';
        inner += 'Pay Rate <input type="text" id="Pay_Rate' + req + '" value="' + parseFloat(data[Pay_Rate]).toFixed(2) + '"><br>';
        inner += 'Bill Rate <input type="text" id="Bill_Rate' + req + '" value="' + parseFloat(data[Bill_Rate]).toFixed(2) + '"><br>';
        inner += 'Start Date <input type="text" id="Start_Date' + req + '" value="' + startdate + '"><br>';
        inner += 'End Date <input type="text" id="End_Date' + req + '" value="' + enddate + '"><br>';
        inner += 'Submittal Deadline <input type="text" id="Submittal_Deadline' + req + '" value="' + submittalDeadline + '"><br>';
        inner += 'Number of Openings <input type="text" id="Openings' + req + '" value="' + data[Openings] + '"><br>';
        inner += 'Hiring Manager <input type="text" id="Hiring_Manager' + req + '" value="' + data[Hiring_Manager] + '"><br>';
        inner += '<label>Job Description</label><br> <textarea rows="10" cols="130" type="textarea" id="Description' + req + '">' + data[Description] + '</textarea><br>';
        inner += '<label>Notes</label><br> <textarea rows="10" cols="130" type="textarea" id="Notes' + req + '">' + data[Notes] + '</textarea><br>';



        inner += "<input type=\"submit\" value=\"UPDATE JOB\"></form>";
        inner += "<br><br><button onclick=\"putOnHold('" + req + "')\">Put On Hold</button>";
        inner += "<br><br><button onclick=\"closeJob('" + req + "')\">Close Job</button>";
        document.getElementById("dropdown" + req).innerHTML = inner;
    }

    function submitOnHold() {
        var data = jobData[reqInUse].split("<dataElement>");
        var str = $('#hold-notes-input').val().replace("'", "`"); 
        var reason = $('input:radio[name=on-hold]:checked').val();
        if (reason == "other") {
            reason = $('#on-hold-other').val();
        }
        var message = "";
        message += 'Req #: ' + reqInUse + '\n';
        message += 'Job Title: ' + data[Job_Title] + '\n';
        message += 'Type of Role: ' + data[Type_of_Service] + '\n';
        message += 'Client: ' + data[Client] + '\n';
        message += 'Location: ' + data[Location_] + '\n';
        message += 'Reason: ' + reason + '\n';
        message += 'Notes: ' + str + '\n';

        sendemail(message, "Job Order-On Hold", emailRecipient);
        var formData = { function: "PlaceOnHold", data: reqInUse };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                	if($("#autorefresh").prop("checked"))
	{
        	document.location = home;
	}
	else {	
		alert("Action has successfully been logged")
	}
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error: putOnHold");
            }
        });
    }
    //var emailRecipient = "hazlett.206@gmail.com";
    var emailRecipient = "orders@tailoredmanagement.com";
    
    function submitEdit() {
    	var str = $('#notes-input').val().replace("'", "`"); 
    	var strDesc = $('#job-description-input').val().replace("'", "`"); 
    	 
        var request = "Job_Title='" + $('#job-title-input').val() + "'" +
            ", Location='" + $('#location-input').val() + "'" +
            ", Type_of_Service='" + $('#job-type-input').val() + "'" +
            ", Priority='Active'" +
            ", Pay_Rate='" + $('#pay-rate-input').val() + "'" +
            ", Bill_Rate='" + $('#bill-rate-input').val() + "'" +
            ", Start_Date='" + $('#start-date-input').val() + "'" +
            ", Address='" + $('#address-input').val() + "'" +
            ", End_Date='" + $('#end-date-input').val() + "'" +
            ", Submittal_Deadline='" + $('#deadline-input').val() + "'" +
            ", Openings='" + $('#openings-input').val() + "'" +
            ", Hiring_Manager='" + $('#hiring-manager-input').val() + "'" +
            ", Description='" + strDesc + "'" +
            ", Override='" + $('#override-input').val() + "'" +
            ", Notes='" + str + "'";

        var monthNames = [
            "January", "February", "March",
            "April", "May", "June", "July",
            "August", "September", "October",
            "November", "December"
        ];

        var d = new Date($('#start-date-input').val());
        var startdate = (monthNames[d.getMonth()]) + " " + d.getDate() + ", " + d.getFullYear();
        d = new Date($('#end-date-input').val());
        var enddate = (monthNames[d.getMonth()]) + " " + d.getDate() + ", " + d.getFullYear();
        d = new Date($('#deadline-input').val());
        var submittalDeadline = (monthNames[d.getMonth()]) + " " + d.getDate() + ", " + d.getFullYear();

        var message = "Req_Number: " + reqInUse +
        "\nClient: " + jobData[reqInUse].split("<dataElement>")[Client] +
        "\nJob Title: " + $('#job-title-input').val() +
        "\n Location: " + $('#location-input').val() +
        "\n Type_of_Service: " + $('#job-type-input').val() +
        "\n Priority: Active'" +
        "\n Pay_Rate: " + $('#pay-rate-input').val() +
        "\n Bill_Rate: " + $('#bill-rate-input').val() +
        "\n Start_Date: " + startdate +
        "\n Address: " + $('#address-input').val() +
        "\n End_Date: " + enddate +
        "\n Submittal_Deadline: " + submittalDeadline +
        "\n Openings: " + $('#openings-input').val() +
        "\n Hiring_Manager: " + $('#hiring-manager-input').val() +
        "\n Description: " + $('#job-description-input').val() +
        "\n Override: " + $('#override-input').val() +
        "\n Notes: " + $('#notes-input').val();
        sendemail(message, "Job Order-Modified", emailRecipient)

        var formData = { function: "DoEdit", data: request, req: reqInUse };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                if (data.indexOf("Error") != -1) {
                    window.alert("Error: " + data);
                }
                else {
                    	if($("#autorefresh").prop("checked"))
	{
        	document.location = home;
	}
	else {	
		alert("Action has successfully been logged")
	}
                }
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("unknown error1: " + errorThrown);
            }
        });
    }
    function sendemail(emessage, esubject, erecipient) {
        var formData = { message: emessage, subject: esubject, recipient: erecipient };
        $.ajax({
            url: "http://tailoredmanagement.com/sendemail.php",
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
    if (data.indexOf("failed") != -1) {
      alert("ERROR in sendemail: FAILED: " + data);
    }
            },
            error: function (jqXHR, textStatus, errorThrown) {
    alert("ERROR in sendemail: " + errorThrown);
            }
        });

    }
    function submitClosed() {
        var data = jobData[reqInUse].split("<dataElement>");
        var str = $('#completed-notes-input').val().replace("'", "`");
        var reason = $('input:radio[name=completed-radio]:checked').val();
        if (reason == "other") {
            reason = $('#completed-other').val();
        }
        var message = "";
        message += 'Req #: ' + reqInUse + '\n';
        message += 'Job Title: ' + data[Job_Title] + '\n' + '\n';
        message += 'Type of Role: ' + data[Type_of_Service] + '\n';
        message += 'Client: ' + data[Client] + '\n';
        message += 'Location: ' + data[Location_] + '\n';
        message += 'Reason: ' + reason + '\n';
        message += 'Notes: ' + str + '\n';

        sendemail(message, "Job Order-Closed", emailRecipient);
        var formData = { function: "CloseJob", data: reqInUse };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                	if($("#autorefresh").prop("checked"))
	{
        	document.location = home;
	}
	else {	
		alert("Action has successfully been logged")
	}
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error: putOnHold");
            }
        });
    }
    function putOnHold(req) {
        var formData = { function: "PlaceOnHold", data: req };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                if($("#autorefresh").prop("checked"))
{
              document.location = home;
}
else {	
		alert("Action has successfully been logged")
	}
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error: putOnHold");
            }
        });
    }
    function closeJob(req) {
        var formData = { function: "CloseJob", data: req };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                if($("#autorefresh").prop("checked"))
{
              document.location = home;
}
else {	
		alert("Action has successfully been logged")
	}
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error: closeJob");
            }
        });
    }

    function getValue() {
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {

            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error: getValue: " + errorThrown);
            }
        });
    }
</script>

<script>
    function addButtons() {
        $(document).ready(function () {

            var popUpPanel = $('.pop-up-panel');
            var candidatePanel = $('#candidate-panel');
            var editPanel = $('#edit-panel');
            var modifyTab = $('#edit-modified');
            var onHoldTab = $('#edit-on-hold');
            var completedTab = $('#edit-completed');
            var detailsPanel = $('#details-panel');

            $('.dropdown').click(function (e) {
                if ($(this).hasClass('selected')) {
                    ClearSelected();
                    $(this).parents('.candidateRow').removeClass('selected-row');
                    $('.pop-up-panel').addClass('hidden');
                    ClearFields();
                    HideTabs();
                }
                else {
                    ClearSelected();
                    $(this).addClass('selected');
                    $(this).parents('.candidateRow').addClass('selected-row');
                    $('.pop-up-panel').removeClass('hidden');
                    ShowDropdown($(this));
                }
            });

            $('.tab-option').click(function (event) {
                HideTabs();
                RemoveSelectedTab();
                $(this).addClass('selected-tab');
                if ($(this).attr('id') == "modified-tab") {
                    modifyTab.removeClass('hidden');
                }
                else if ($(this).attr('id') == "on-hold-tab") {
                    onHoldTab.removeClass('hidden');
                }
                else if ($(this).attr('id') == "closed-tab") {
                    completedTab.removeClass('hidden');
                }
            });

            function RemoveSelectedTab() {
                $('.tab-option').removeClass('selected-tab');
            }

            function ClearSelected() {
                $('.dropdown').removeClass('selected');
                HideAllPanels();
            }

            function ClearFields() {
                //$('input').val('');
                $('additionalinfo').html('');
                $('input[type="radio"]').prop('checked', false);
            }

            function ShowDropdown(dropdownElement) {
                $('#candidate-panel').html('');
                var reqNumber = dropdownElement.attr('id');
                reqInUse = reqNumber;
                var dataArray = jobData[reqNumber].split("<dataElement>");

                if (dropdownElement.hasClass('candidate')) {
                    $('#additionalinfo').hide();
                    candidatePanel.removeClass('hidden');
                    getCandidates(reqNumber);
                }
                else if (dropdownElement.hasClass('edit')) {
                    if (!checkCandidatePermissions("", dataArray[Client])) {
                        return;
                    }
                    $('#additionalinfo').hide();
                    editPanel.removeClass('hidden');
                    $('#modified-tab').addClass('selected-tab');
                    modifyTab.removeClass('hidden');
                    $('#job-title-input').val(dataArray[Job_Title]);
                    $('#job-type-input').val(dataArray[Type_of_Service]);
                    $('#location-input').val(dataArray[Location_]);
                    $('#address-input').val(dataArray[Address]);
                    $('#pay-rate-input').val(parseFloat(dataArray[Pay_Rate]).toFixed(2));
                    $('#bill-rate-input').val(parseFloat(dataArray[Bill_Rate]).toFixed(2));
                    $('#start-date-input').val(dataArray[Start_Date]);
                    $('#end-date-input').val(dataArray[End_Date]);
                    $('#deadline-input').val(dataArray[Submittal_Deadline]);
                    $('#openings-input').val(dataArray[Openings]);
                    $('#hiring-manager-input').val(dataArray[Hiring_Manager]);
                    $('#job-description-input').val(dataArray[Description]);
                    $('#notes-input').val(dataArray[Notes]);
                    $('#override-input').val(dataArray[Override]);
                }
                else if (dropdownElement.hasClass('details')) {
                    getFormattedDetails(jobData[reqNumber]);
                }

            }

            function HideTabs() {
                HideElement(modifyTab);
                HideElement(onHoldTab);
                HideElement(completedTab);
                RemoveSelectedTab();
            }

            function HideAllPanels() {
                HideTabs();
                HideElement(popUpPanel);
                HideElement(candidatePanel);
                HideElement(editPanel);
                HideElement(detailsPanel);
                $('#int-candidate-popup').addClass('hidden');
                $('#off-candidate-popup').addClass('hidden');
                $('#clrd-candidate-popup').addClass('hidden');
                $('#con-candidate-popup').addClass('hidden');
                $('#rmvd-candidate-popup').addClass('hidden');
                $('#notes-candidate-popup').addClass('hidden');
                $('#submit-candidate-popup').addClass('hidden');
            }

            function HideElement(element) {
                element.addClass('hidden');
            }
        });


        var popUpPanel = $('.pop-up-panel');
        var candidatePanel = $('#candidate-panel');
        var editPanel = $('#edit-panel');
        var modifyTab = $('#edit-modified');
        var onHoldTab = $('#edit-on-hold');
        var completedTab = $('#edit-completed');
        var detailsPanel = $('#details-panel');

        function RemoveSelectedTab() {
            $('.tab-option').removeClass('selected-tab');
        }

        function ClearSelected() {
            $('.dropdown').removeClass('selected');
            HideAllPanels();
        }

        function ClearFields() {
            //$('input').val('');
            $('additionalinfo').html('');
            $('input[type="radio"]').prop('checked', false);
        }

        function HideTabs() {
            HideElement(modifyTab);
            HideElement(onHoldTab);
            HideElement(completedTab);
            RemoveSelectedTab();

        }

        function HideAllPanels() {
            HideTabs();
            HideElement(popUpPanel);
            HideElement(candidatePanel);
            HideElement(editPanel);
            HideElement(detailsPanel);
        }

        function HideElement(element) {
            element.addClass('hidden');
        }
    }

    function submitCandidateForm(req) {
        ClearSelected();
        $('.candidateRow').removeClass('selected-row');
        $('.pop-up-panel').addClass('hidden');
        ClearFields();
        HideTabs();

        $('#submissionForm').removeClass('hidden');
        $('#submissionReq').val(req);
        $('#submissionTitle').val(jobData[req].split("<dataElement>")[Job_Title]);
        $('#submissionPay').val(jobData[req].split("<dataElement>")[Pay_Rate]);
        $("input[name=client][value=" + jobData[req].split("<dataElement>")[Client] + "]").prop("checked", true);

    }

    var candidateReq = "";
    function getCandidates(req) {
        var formData = { function: "GetCandidates", data: req };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                candidateReq = req;
                var rows = data.split("<rowElement>");

                //var inner = '<br><button onclick="submitCandidateForm(\'' + req + '\')">SUBMIT NEW CANDIDATE</button><br>';
                var inner = '<br>';

                if (rows.length > 1) {
                    inner += '<table border="1"><tr><th>ID</th><th>CANDIDATE NAME</th><th>STATUS</th><th>RECRUITER</th><th>SUBMISSION<BR>CONFIRMED</th><th>REMOVED<BR>CANDIDATE</th><th>INTERVIEW<BR>REQUESTED</th><th>OFFERED</th><th>CLEARED<br>TO START</th><th>CONFIRMED<br>START</th><th>NOTES</th></tr>';
                }
                else {
                    inner += '<br><b>NO CANDIDATES TO DISPLAY</b><br>';
                }
                for (i = 0; i < rows.length - 1; i++) {
                    //var param = rows[i].replace(/’|'|"|<br>|\n/g, "");

                    var dataArray = rows[i].split("<dataElement>");
                    var param = "";
                    for (j = 0; j < dataArray.length; j++)
                    {
                      if ((j != 7) && (j != 8))
                      {

                        param += dataArray[j] + "<dataElement>";
                      }
                      else
                      {
                        param += "No Data<dataElement>";
                      }
                    }
                    //param = param.replace(/’|'|"|<br>|\n/g, "");
                    inner += '<tr><td>' + dataArray[2] + '</td><td>' + dataArray[0] + '</td><td>' + dataArray[4] + '<br>' + dataArray[12] + '</td><td>' + dataArray[5] + '</td>' +
                    '<td><button onclick="submitCandidateByName(\'' + param + '\')">SUBMIT</button></td>' +
                    '<td><button onclick="rmvdCandidate(\'' + param + '\')">REMOVE</button></td>' +
                    '<td><button onclick="intCandidate(\'' + param + '\')">INTERVIEW</button></td>' +
                    '<td><button onclick="offCandidate(\'' + param + '\')">OFFER</button></td>' +
                    '<td><button onclick="clrdCandidate(\'' + param + '\')">CLEAR</button></td>' +
                    '<td><button onclick="conCandidate(\'' + param + '\')">CONFIRM</button></td>' +
                    '<td><button onclick="addNotes(\'' + param + '\')">NOTES</button></td>' +
                    '</tr>';
                }
                inner += '</table>';
                $('#candidate-panel').html(inner);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error: getValue: " + errorThrown);
            }
        });
    }
    function hidePopups() {
        $('#int-candidate-popup').addClass('hidden');
        $('#off-candidate-popup').addClass('hidden');
        $('#clrd-candidate-popup').addClass('hidden');
        $('#con-candidate-popup').addClass('hidden');
        $('#rmvd-candidate-popup').addClass('hidden');
        $('#notes-candidate-popup').addClass('hidden');
        $('#submit-candidate-popup').addClass('hidden');
    }

    function checkCandidatePermissions(recruiter, client) {
        var ret;
        switch (UserPermission) {
            case "0":
                if (recruiter == UserName) {
                    ret = true;
                }
                else {
                    ret = false;
                }
                break;
            case "1":
                if ($.inArray(client, UserClients) > -1) {
                    ret = true;
                }
                else if (recruiter == UserName) {
                    ret = true;
                }
                else {
                    ret = false;
                }
                break;
            case "2":
                if ($.inArray(client, UserClients) > -1) {
                    ret = true;
                }
                else if (recruiter == UserName) {
                    ret = true;
                }
                else {
                    ret = false;
                }
                break;
            case "3":
                ret = true;
                break;
        }
        if (ret == false) {
            alert("You do not have the neccessary permissions: " + client + " : " + UserClients);
        }
        return ret;
    }

    var currentCandidateData;
    function intCandidate(data) {
        hidePopups();
        data = data.split("<dataElement>");
        if (!checkCandidatePermissions(data[5], jobData[candidateReq].split("<dataElement>")[Client].trim()))
            return;
        req = candidateReq;
        currentCandidateID = data[1];
        currentCandidateData = data;
        $('#int-candidate-popup').removeClass('hidden');
    }
    function submitInterview() {
        var intType = $('input:radio[name=int-status]:checked').val();
        var data = jobData[req].split("<dataElement>");

        var message = 'Req #: ' + req + '\n';
        message += 'Job Title: ' + data[Job_Title] + '\n';
        message += 'Client: ' + data[Client] + '\n';
        message += 'Recruiter: ' + currentCandidateData[5] + '\n';
        message += 'Candidate Name: ' + currentCandidateData[0] + '\n';
        
        message += 'Interview Date: ' + $('input:[name=int-date]').val() + '\n';
        message += 'Type of Interview: ' + $('input:radio[name=int-type]:checked').val() + '\n';
        
        message += 'Notes: ' + $('#int-notes').val() + '\n';

        updateStatus(intType, $('#int-notes').val(), message);

        $('#int-candidate-popup').addClass('hidden');
        document.getElementById('int-notes').value='';
        
        
    }
    function offCandidate(data) {
        hidePopups();
        data = data.split("<dataElement>");
        if (!checkCandidatePermissions(data[5], jobData[candidateReq].split("<dataElement>")[Client].trim()))
            return;
        req = candidateReq;
        currentCandidateID = data[1];
        currentCandidateData = data;
        $('#off-candidate-popup').removeClass('hidden');
    }
    function offer() {
        var data = jobData[req].split("<dataElement>");

        var message = 'Req #: ' + req + '\n';
        message += 'Job Title: ' + data[Job_Title] + '\n';
        message += 'Client: ' + data[Client] + '\n';
        message += 'Recruiter: ' + currentCandidateData[5] + '\n';
        message += 'Candidate Name: ' + currentCandidateData[0] + '\n';
        message += 'Offer Status: ' + $('input:radio[name=off-status]:checked').val() + '\n';
        message += 'Notes: ' + $('#off-notes').val() + '\n';

        updateStatus($('input:radio[name=off-status]:checked').val(), $('#off-notes').val(), message);
        $('#off-candidate-popup').addClass('hidden');
        document.getElementById('off-notes').value='';
    }
    function clrdCandidate(data) {
        hidePopups();
        data = data.split("<dataElement>");
        if (!checkCandidatePermissions(data[5], jobData[candidateReq].split("<dataElement>")[Client].trim()))
            return;
        req = candidateReq;
        currentCandidateID = data[1];
        currentCandidateData = data;
        $('#clrd-candidate-popup').removeClass('hidden');
    }
    function clrd() {
        var data = jobData[req].split("<dataElement>");

        var message = 'Req #: ' + req + '\n';
        message += 'Job Title: ' + data[Job_Title] + '\n';
        message += 'Client: ' + data[Client] + '\n';
        message += 'Recruiter: ' + currentCandidateData[5] + '\n';
        message += 'Candidate Name: ' + currentCandidateData[0] + '\n';
        message += 'Notes: ' + $('#clrd-notes').val() + '\n';

        updateStatus("Cleared", $('#clrd-notes').val(), message);
        $('#clrd-candidate-popup').addClass('hidden');
        document.getElementById('clrd-notes').value='';
    }
    function conCandidate(data) {
        hidePopups();
        data = data.split("<dataElement>");
        if (!checkCandidatePermissions(data[5], jobData[candidateReq].split("<dataElement>")[Client].trim()))
            return;
        req = candidateReq;
        currentCandidateID = data[1];
        currentCandidateData = data;
        $('#con-candidate-popup').removeClass('hidden');
        $('#con-pay-rate').val(data[6]);
        $('#con-bill-rate').val(jobData[req].split("<dataElement>")[Bill_Rate]);
    }
    function con() {
        var data = jobData[req].split("<dataElement>");
        var message = 'Req #: ' + req + '\n';
        message += 'Job Title: ' + data[Job_Title] + '\n';
        message += 'Client: ' + data[Client] + '\n';
        message += 'Recruiter: ' + currentCandidateData[5] + '\n';
        message += 'Candidate Name: ' + currentCandidateData[0] + '\n';
        message += 'Start Date: ' + $('#con-date').val() + '\n';
        message += 'Pay Rate: ' + $('#con-pay-rate').val() + '\n';
        message += 'Bill Rate' + data[Bill_Rate] + '\n';
        message += 'Notes: ' + $('#con-notes').val() + '\n';

        updateStatus("Confirmed", $('#con-notes').val(), message);
        $('#con-candidate-popup').addClass('hidden');
        document.getElementById('con-notes').value='';
    }
    function rmvdCandidate(data) {
        hidePopups();
        data = data.split("<dataElement>");
        if (!checkCandidatePermissions(data[5], jobData[candidateReq].split("<dataElement>")[Client].trim()))
            return;
        req = candidateReq;
        currentCandidateID = data[1];
        currentCandidateData = data;
        $('#rmvd-candidate-popup').removeClass('hidden');
    }
    function rmvd() {
        var data = jobData[req].split("<dataElement>");
        var message = 'Req #: ' + req + '\n';
        message += 'Job Title: ' + data[Job_Title] + '\n';
        message += 'Client: ' + data[Client] + '\n';
        message += 'Recruiter: ' + currentCandidateData[5] + '\n';
        message += 'Candidate Name: ' + currentCandidateData[0] + '\n';
        message += 'Reason: ' + $('#rmvd-reason').val() + '\n';
        message += 'Notes: ' + $('#rmvd-notes').val() + '\n';

        updateStatus("Removed", $('#con-notes').val(), message);
        $('#con-candidate-popup').addClass('hidden');
        document.getElementById('rmvd-notes').value='';
    }
    function addNotes(data) {
        hidePopups();
        data = data.split("<dataElement>");
        if (!checkCandidatePermissions(data[5], jobData[candidateReq].split("<dataElement>")[Client].trim()))
            return;
        req = candidateReq;
        currentCandidateID = data[1];
        currentCandidateData = data;
        $('#notes-candidate-popup').removeClass('hidden');

        var rows = data[11].split(",");
        document.getElementById('cand-notes-div').innerHTML = "";
        for (i = 0; i < rows.length; i++) {
            document.getElementById('cand-notes-div').innerHTML += rows[i] + '<br>';
        }


    }
    function notesForCandidate() {
        $('#notes-candidate-popup').addClass('hidden');
    }
    function submitCandidateByName(data) {
        hidePopups();
        data = data.split("<dataElement>");
        if (!checkCandidatePermissions(data[5], jobData[candidateReq].split("<dataElement>")[Client].trim()))
            return;
        req = candidateReq;
        currentCandidateID = data[1];
        currentCandidateData = data;
        $('#submit-candidate-popup').removeClass('hidden');
    }
    function submitForCandidate() {

        var data = jobData[req].split("<dataElement>");
        var message = 'Req #: ' + req + '\n';
        message += 'Job Title: ' + data[Job_Title] + '\n';
        message += 'Client: ' + data[Client] + '\n';
        message += 'Recruiter: ' + currentCandidateData[5] + '\n';
        message += 'Candidate Name: ' + currentCandidateData[0] + '\n';


        var formData = { function: "UpdateCandidateStatus", id: currentCandidateID, data: "Submitted", notes: $('#sub-notes').val(), recruiter:UserName };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                message += 'Timestamp: ' + data + '\n';
                message += 'Notes: ' + $('#sub-notes').val() + '\n';
                sendemail(message, "Submitted", emailRecipient);
                if($("#autorefresh").prop("checked"))
{
              document.location = home;
}
else {	
		alert("Action has successfully been logged")
		document.getElementById('sub-notes').value='';
	}
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error: updateStatus: " + errorThrown);
            }
        });

        $('#submit-candidate-popup').addClass('hidden');
    }

    function getFormattedDetails(rawData) {
        var dataArray = rawData.split("<dataElement>");
        //$('#additionalinfo').html('<br><b>LOADING</b>');
        $('#additionalinfo').show();

        var formData = { function: "GetFormattedDetails", data: reqInUse };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                data = data.split(";");
                var dataArray = jobData[reqInUse].split("<dataElement>");
                var needed = (parseInt(dataArray[Openings]) * 2) - parseInt(data[1]);
                if (needed < 0)
                    needed = 0;
                $('#job-title-info').val(dataArray[Job_Title]);
                $('#job-type-info').val(dataArray[Type_of_Service]);
                $('#location-info').val(dataArray[Location_]);
                $('#address-info').val(dataArray[Address]);
                $('#pay-rate-info').val(parseFloat(dataArray[Pay_Rate]).toFixed(2));
                $('#bill-rate-info').val(parseFloat(dataArray[Bill_Rate]).toFixed(2));
                $('#start-date-info').val(dataArray[Start_Date]);
                $('#end-date-info').val(dataArray[End_Date]);
                $('#deadline-info').val(dataArray[Submittal_Deadline]);
                $('#hiring-manager-info').val(dataArray[Hiring_Manager]);
                $('#job-description-info').val(dataArray[Description]);
                $('#notes-info').val(dataArray[Notes]);
                $('#rejections-info').val(data[0]);
                $('#submissions-info').val(dataArray[Submissions]);
                $('#submissions-needed-info').val(needed);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("unknown error: " + errorThrown);
            }
        });

        // var formData = {function:"GetFormattedDetails", data:reqInUse };
        //   $.ajax({
        //       url : datamanager,
        //       type: "POST",
        //       data : formData,
        //       success: function(data, textStatus, jqXHR)
        //       {
        //         $('#additionalinfo').html(data);
        //       },
        //       error: function (jqXHR, textStatus, errorThrown)
        //       {
        //           window.alert("unknown error: " + errorThrown);
        //       }
        //   });
    }

    function getDetails(rawData) {
        var dataArray = rawData.split("<dataElement>");
        $('#additionalinfo').html('<br><b>LOADING</b>');


        var formData = { function: "GetDetails", data: reqInUse };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                var inner = '<br>';
                var needed = "";
                var submissions = "";
                var rejections = "";
                try {
                    var temp = data.split("<mainBreak>");
                    var needed = (2 * parseInt(dataArray[Openings])) - parseInt(temp[1]);
                    if (needed < 0) {
                        needed = 0;
                    }
                    var submissions = temp[1];
                    var rejections = temp[2];
                }
                catch (e) {
                    var needed = "ERROR";
                    var submissions = "ERROR";
                    var rejections = "ERROR";
                }
                //hard code details
                inner += '<div><b>' + "Number of Submissions" + '</b> : ' + submissions + '</div>'; //number of submissions
                inner += '<div><b>' + "Number of Rejections" + '</b> : ' + rejections + '</div>'; //number of rejections
                inner += '<div><b>' + "Submissions Needed" + '</b> : ' + needed + '</div>'; //number of submissions needed
                inner += '<div><b>' + headers[End_Date] + '</b> : ' + dataArray[End_Date] + '</div>'; //end date
                inner += '<div><b>' + headers[Hiring_Manager] + '</b> : ' + dataArray[Hiring_Manager] + '</div>'; //hiring manager
                inner += '<div><b>' + "Address" + '</b> : ' + dataArray[Address] + '</div>'; //address
                inner += '<div><b>' + headers[Bill_Rate] + '</b> : ' + parseFloat(dataArray[Bill_Rate]).toFixed(2) + '</div>'; //bill rate
                inner += '<div><b>' + headers[Description] + '</b> : ' + dataArray[Description] + '</div>'; //description
                inner += '<div><b>' + headers[Notes] + '</b> : ' + dataArray[Notes] + '</div>'; //notes
                inner += '<div><b>' + headers[Stamp] + '</b> : ' + dataArray[Stamp] + '</div>'; //timestamp

                /*all details
                for (i = 0; i < headers.length; i++)
                {
                    inner += '<div><b>' + headers[i] + '</b> : ' + dataArray[i] + '</div>';
                }
                */
                $('#additionalinfo').html(inner);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("unknown error: " + errorThrown);
            }
        });
    }
    function sendcandemail(emessage, esubject, erecipient) {
        var formData = { message: emessage, subject: esubject, recipient: erecipient };
        $.ajax({
            url: "http://tailoredmanagement.com/sendemail.php",
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
              if (data.indexOf("failed") != -1) {
                alert("FAILED sendemail: " + data);
              }
if($("#autorefresh").prop("checked"))
{
              document.location = home;
}
else {	
		alert("Action has successfully been logged")
	}
            },
            error: function (jqXHR, textStatus, errorThrown) {
              if (errorThrown != "") {
                alert("ERROR in sendemail: " + errorThrown + " | textStatus: " + textStatus);
              }
              else
              {
              	document.location = home;
              }              
            }
        });

    }
    function updateStatus(query, notes, message) {

        var formData = { function: "UpdateCandidateStatus", id: currentCandidateID, data: query, notes: notes, recruiter:UserName };
        $.ajax({
            url: datamanager,
            type: "POST",
            data: formData,
            success: function (data, textStatus, jqXHR) {
                sendcandemail(message, query, emailRecipient);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                window.alert("error: updateStatus: " + errorThrown);
            }
        });
    }
</script>
